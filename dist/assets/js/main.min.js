"use strict";!function(t,e){t.Barq=function(n,i){var s=this,a=i||{};s.baseField=n,s.options={removeFirstOptionFromSearch:a.removeFirstOptionFromSearch||!0,useFirstOptionTextAsPlaceholder:a.useFirstOptionTextAsPlaceholder||!0,placeholderText:a.placeholderText||null,noResultsMessage:a.noResultsMessage||"No results found.",isRTL:a.isRTL||!1,onload:a.onload||function(){},onchange:a.onchange||function(){}};var r={dropdownList:"barq-list",textInput:"barq-text-input",textInputWithList:"barq-input-text-expanded",hidden:"barq-hidden",visible:"barq-visible",activeItem:"barq-active-item",noResults:"barq-no-results",match:"barq-match"},o={TAB:9,ENTER:13,SHIFT:16,ESC:27,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,CMD:91},l={E_OPTION_NOT_FOUND:"No <option> elements found.",E_BASE_FIELD_NOT_FOUND:"Missing <select> element on instantiation.",E_ALREADY_INSTANTIATED:"Instance already exists."},u={addEventListener:function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,n)},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},removeClass:function(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(n," ")}},getTextNode:function(t){return t&&(t.innerText||t.textContent||t.innerHTML)},escapeString:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}};s.init=function(){if("SELECT"!==n.tagName.toUpperCase())throw new p(l.E_BASE_FIELD_NOT_FOUND);if(n.getAttribute("data-barq-instantiated"))throw new p(l.E_ALREADY_INSTANTIATED);return n.setAttribute("data-barq-instantiated","true"),u.addClass(s.baseField,r.hidden),s.textInput=c(),s.list=f(),s.itemsHTML=v(),m(s.itemsHTML),s.items=s.list.childNodes,I(),d(),s.options.onload.call(s),s};var c=function(){var t=e.createElement("input");if(t.setAttribute("class",r.textInput),t.setAttribute("autocapitalize","off"),t.setAttribute("autocomplete","off"),t.setAttribute("autocorrect","off"),t.setAttribute("spellcheck","false"),s.options.isRTL&&t.setAttribute("dir","rtl"),t.setAttribute("tabindex",s.baseField.tabIndex),s.baseField.setAttribute("tabindex","-1"),s.options.placeholderText)t.setAttribute("placeholder",s.options.placeholderText);else if(s.options.useFirstOptionTextAsPlaceholder)try{var n=u.getTextNode(s.baseField.options[0]);t.setAttribute("placeholder",n)}catch(t){throw new p(l.E_OPTION_NOT_FOUND)}return s.baseField.insertAdjacentHTML("afterend",t.outerHTML),s.baseField.nextElementSibling},d=function(){var t=s.baseField.querySelector("[selected]");return t&&s.selectItem(t),t},p=function(t){this.message=t,this.name="BarqException"};p.prototype=new Error;var v=function(){if(s.options.removeFirstOptionFromSearch)try{s.baseField.removeChild(s.baseField.options[0])}catch(t){throw new p(l.E_OPTION_NOT_FOUND)}var t=s.baseField.innerHTML.replace(/<!--([^\[|(<!)].*)/g,"").replace(/\s{2,}/g,"").replace(/(\r?\n)/g,""),e=/<option(?:[^>]*?value="([^"]*?)"|)[^>]*?>(.*?)<\/option>\n?/gi,n='<li data-value="$1">$2</li>';return t=t.replace(e,n)};s.showList=function(){u.addClass(s.list,r.visible),s.repositionList(),u.addClass(s.textInput,r.textInputWithList),s.list.firstChild.className!==r.noResults&&u.addClass(s.list.firstChild,r.activeItem)},s.hideList=function(){u.removeClass(s.list,r.visible),u.removeClass(s.textInput,r.textInputWithList)},s.selectItem=function(t){var e=u.getTextNode(t);s.textInput.value=e,s.text=e,s.hideList();var n=t.getAttribute("data-value")?t.getAttribute("data-value"):t.value;s.baseField.value=n,s.value=n,s.options.onchange.call(s)};var f=function(){var t=e.createElement("ul");return t.setAttribute("class",r.dropdownList),s.options.isRTL&&t.setAttribute("dir","rtl"),s.textInput.insertAdjacentHTML("afterend",t.outerHTML),s.textInput.nextElementSibling},m=function(t){s.list.innerHTML=t,s.currentItemsDOM=s.list.childNodes};s.repositionList=function(){var n=s.textInput.offsetTop,i=Math.floor(s.textInput.offsetTop+parseInt(s.textInput.offsetHeight,10)),a=t.innerHeight||e.documentElement.clientHeight,r=0;r=i+s.list.offsetHeight>a?n-s.list.offsetHeight:i,s.list.style.top=r+"px",s.list.style.left=s.textInput.offsetLeft+"px",s.list.style.width=s.textInput.offsetWidth+"px"},s.search=function(t){var e="";""!==t?(t=u.escapeString(t),e=new RegExp("<li[^>]*>[^<]*"+t+"[^<]*</li>","gi")):e=/<li[^<]*<\/li>/gi;var n=s.itemsHTML.match(e)||[];return n.length&&(n=n.join(""),t&&(n=h(t,n)),m(n),u.addClass(s.list.firstChild,r.activeItem)),n};var h=function(t,e){t=u.escapeString(t);var n=new RegExp("(<li[^>]*>[^<]*)("+t+")([^<]*</li>)","gi"),i='$1<em class="'+r.match+'">$2</em>$3';return e.replace(n,i)},g=function(){var t='<li class="0">1</li>',e=t.replace("0",r.noResults).replace("1",s.options.noResultsMessage);m(e)};s.getActiveListItem=function(){return s.list.querySelector("."+r.activeItem)};var T=function(t){var e=s.currentItemsDOM;if(!(e.length<=1)){var n,i=s.getActiveListItem();t===o.UP?i.previousElementSibling&&(n=i.previousElementSibling):i.nextElementSibling&&(n=i.nextElementSibling),n&&(u.removeClass(i,r.activeItem),u.addClass(n,r.activeItem),s.scrollListItemIntoView(n))}};s.scrollListItemIntoView=function(t){var e=t.offsetTop,n=t.offsetHeight,i=s.list.offsetHeight,a=s.list.scrollTop,r=a>=e,o=e>=a+i-n;r?s.list.scrollTop=e:o&&(s.list.scrollTop=e-i+n)};var I=function(){u.addEventListener(s.textInput,"keyup",function(e){e=e||t.event;var n=e.keyCode||e.which,i=!1;for(var a in o)if(n===o[a]){i=!0;break}if(!i){s.list.scrollTop=0;var r=s.search(this.value);return r.length<1&&(g(),s.currentItemsDOM=null),void s.showList()}if(n===o.ENTER){var l=s.getActiveListItem();return void(l&&s.selectItem(l))}return n===o.ESC?void s.hideList():void 0}),u.addEventListener(s.textInput,"keydown",function(e){e=e||t.event;var n=e.keyCode||e.which;(n===o.UP||n===o.DOWN)&&s.currentItemsDOM&&T(n)}),u.addEventListener(s.textInput,"focus",function(){var t=s.search(this.value);t.length<1&&(g(),s.currentItemsDOM=null),s.showList()}),u.addEventListener(s.textInput,"blur",function(){!s.preventBlurTrigger&&s.getActiveListItem()&&s.selectItem(s.getActiveListItem())}),u.addEventListener(s.list,"mousedown",function(e){s.preventBlurTrigger=!0,t.setTimeout(function(){s.preventBlurTrigger=!1},1);var n=e.target.className===r.match?e.target.parentNode:e.target;n!==s.list&&n.className!==r.noResults&&s.selectItem(n)}),u.addEventListener(t,"resize",function(){s.repositionList()})}},function(){var n=e.querySelectorAll("[data-barq]");[].forEach.call(n,function(e){new t.Barq(e).init()})}()}(window,document),function(){function t(t,e,n,i){n=n.sort(function(n,i){return e?n[t]>i[t]?1:n[t]<i[t]?-1:0:i[t]>n[t]?1:i[t]<n[t]?-1:0}),i&&(document.getElementById("drivers").innerHTML="",f())}function e(){t("familyName",!0,g,!0)}function n(){t("givenName",!0,g,!0)}function i(){t("dateOfBirth",!1,g,!0)}function s(){var t=new XMLHttpRequest;t.open("GET","json/status.json",!0),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.responseText);console.log("in"),x=e.MRData.StatusTable.Status,a()}},t.send()}function a(){t("status",!0,x,!1),r()}function r(){var t=Array(),e=x.length;t.push('<option value="">any status</option>');for(var n=0;n<e;n++)b=x[n],t.push('<option value="'+b.statusId+'">'+b.status+" ("+b.count+")</option>");O.innerHTML=t.join("");new Barq(O,{useFirstOptionTextAsPlaceholder:!0}).init()}function o(){var t=new XMLHttpRequest;t.open("GET","json/circuits.json",!0),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.responseText);I=e.MRData.CircuitTable.Circuits,l()}},t.send()}function l(){t("circuitName",!0,I,!1),u()}function u(){var t=Array(),e=I.length;t.push('<option value="">any circuit</option>');for(var n=0;n<e;n++)T=I[n],t.push('<option value="'+T.circuitId+'">'+T.circuitName+" - "+T.Location.locality+" - "+T.Location.country+"</option>");y.innerHTML=t.join("");new Barq(y,{useFirstOptionTextAsPlaceholder:!0}).init()}function c(){var t=new XMLHttpRequest;t.open("GET","json/Constructors.json",!0),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.responseText);E=e.MRData.ConstructorTable.Constructors,d()}},t.send()}function d(){t("name",!0,E,!1),p()}function p(){var t=Array(),e=E.length;t.push('<option value="">any constructor</option>');for(var n=0;n<e;n++)L=E[n],t.push('<option value="'+L.constructorId+'">'+L.name+"</option>");N.innerHTML=t.join("");new Barq(N,{useFirstOptionTextAsPlaceholder:!0}).init()}function v(t,e,n,i){var s=new XMLHttpRequest;s.open("GET","http://ergast.com/api/f1/"+n+e+t+i+"drivers.json?limit=50",!0),console.log("http://ergast.com/api/f1/"+n+e+t+i+"drivers.json?limit=50"),s.onreadystatechange=function(){if(4===s.readyState&&200===s.status){var t=JSON.parse(s.responseText);g=t.MRData.DriverTable.Drivers,f()}},s.send()}function f(){for(var t=Array(),e=g.length,n=0;n<e;n++)h=g[n],t.push('<li>\n                                    <div class="flag" style="background-image: url(\'/dist/assets/img/svg/flag/'+h.nationality+'.svg\');"></div>\n                                    <a target="_blank" href="'+h.url+'">\n                                        '+h.givenName+" "+h.familyName+"\n                                    </a>\n                                    <span>"+h.dateOfBirth+"</span>\n                                </li>");document.getElementById("drivers").innerHTML=t.join("")}function m(){var t=y.options[y.selectedIndex].value,e=N.options[N.selectedIndex].value,n=A.options[A.selectedIndex].value,i=O.options[O.selectedIndex].value;if(t)var s="circuits/"+t+"/";else var s="";if(n){console.log("in");var a=n+"/"}else{console.log("else");var a=""}if(e)var r="constructors/"+e+"/";else var r="";if(i)var o="status/"+i+"/";else var o="";v(s,r,a,o)}var h,g,T,I,L,E,b,x,y=document.getElementById("circuit"),N=document.getElementById("constructor"),A=document.getElementById("year"),O=document.getElementById("status");document.getElementById("sort-family-name").addEventListener("mouseup",e,!0),document.getElementById("sort-given-name").addEventListener("mouseup",n),document.getElementById("sort-date-of-birth").addEventListener("mouseup",i),s(),o(),c(),document.getElementById("go").addEventListener("mouseup",m);new Barq(A,{useFirstOptionTextAsPlaceholder:!0}).init()}();
//# sourceMappingURL=maps/main.min.js.map
